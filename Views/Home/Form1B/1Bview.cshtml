@model Wq_Surveillance.Models.Dto.Form1BDto
@using Microsoft.AspNetCore.Http
@inject IHttpContextAccessor HttpContextAccessor
@{
    var contextHost = HttpContextAccessor.HttpContext.Request.Host;
    Layout = null;
}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width" />
    <title>Form - NWASH</title>
    <link rel="stylesheet" href="~/css/doc.css">
    <link rel="stylesheet" href="~/css/styles.css">
    <link rel="shortcut icon" href="~/images/logos/NWASH.svg" />
    <link rel="stylesheet" href="~/lib/bootstrap/dist/css/bootstrap.min.css" crossorigin="anonymous">
    <link rel="stylesheet" href="~/lib/bootstrap/dist/css/bootstrap.css" crossorigin="anonymous">
    <link href="~/fontawesome-5.15.2/fontawesome-free-5.15.2-web/css/all.css" rel="stylesheet" />
    <script src="~/lib/jquery/dist/jquery.min.js"></script>
    <script src="~/lib/bootstrap/dist/js/bootstrap.bundle.min.js"></script>
    <script src="~/js/site.js" asp-append-version="true"></script>
    <style>
        .bsv {
            width: 275mm;
            padding: 15mm 20mm;
            margin: 10mm auto;
            border: 1px #D3D3D3 solid;
            border-radius: 0px;
            background: white;
            box-shadow: 0 0 5px rgba(0, 0, 0, 0.2);
        }
    </style>
</head>
<body>
    <div class="container-fluid" style="float: left; position: fixed; padding-top: 20px; padding-bottom: 20px; top: 0px;background: #fff !important;z-index: 999;">
        <div style="float:left;">
            <a class="item" asp-area="" asp-controller="Dashboard" asp-action="Index">
                <img src="~/images/logos/nwash_logo.png" class="img-responsive" alt="Ministry of Water Supply &amp; Sanitation" style="width: 80%;">
            </a>
        </div>
        <div style="clear:both;"></div>
        <div class="dropdown-divider" style="border-top: 1px solid #002f84;"></div>
        <div style="clear: both;"></div>
        @if (contextHost.Host.Contains("training"))
        {
            <div class="container-fluid" style="background:#0330467a; padding:5px; float:left;">
                <h5 style="margin-bottom:0px;">खानेपानी सुरक्षा योजनाको विस्तृत लेखाजोखा फाराम (WSP Implemented WSS)</h5>
            </div>
        }
        else
        {
            <div class="container-fluid" style="background:#e9ebf4; padding:5px; float:left;">
                <h5 style="margin-bottom:0px;">
                    खानेपानी सुरक्षा योजनाको विस्तृत लेखाजोखा फाराम (WSP Implemented WSS)
                </h5>
            </div>
        }
    </div>
    <div class="bsv" style="margin-top:165px;">
        <div class="table-responsive">
            <table class="table table-borderless" style="width:90%;">
                <tr><td>Name of schema</td><td>@Model.FormId</td></tr>
                <tr><td>Project code</td><td>@Model.ProCode</td></tr>
                <tr><td>Address</td><td>@Model.Address</td></tr>
                <tr><td>Total HH served</td><td>@Model.TotalHhServed</td> </tr>
                <tr>
                    <td>Population served</td>
                    <td>@Model.TotalBenificiaryPopulation</td>
                </tr>
            </table>
            <div style="color:#002F84;">
                <h4 style="text-align: center;">Score</h4>
            </div>
            <br />
            <table class="table table-borderless" style="width:90%;">
                <tr>
                    <td>Total score</td>
                    <td>@Model.TotalScore</td>
                </tr>
                <tr>
                    <td>Status</td>
                    <td>
                        @{
                            var status = Model.TotalScore < 10 ? "नराम्र" :
                            Model.TotalScore <= 20 ? "ठिकै" :
                            Model.TotalScore <= 30 ? "राम्रो" :
                            Model.TotalScore <= 40 ? "उत्कृष्ठ" : "Invalid Score";
                        }
                        @status
                    </td>
                </tr>
                <tr>
                    <td>टोली गठन</td>
                    <td>@Model.TeamFormationScore</td>
                </tr>
                <tr>
                    <td>प्रणालीको विश्लेषण</td>
                    <td>@Model.SystemAnalysisScore</td>
                </tr>
                <tr>
                    <td>प्रदूषण पहिचान र जोखिमको विश्लेषण र नियन्त्रणका उपाय</td>
                    <td>@Model.PollutionRiskControlMeasureScore</td>
                </tr>
                <tr>
                    <td>सुधार योजना</td>
                    <td>@Model.ImprovementPlanScore</td>
                </tr>
                <tr>
                    <td>अनुगमन</td>
                    <td>@Model.MonitoringScore</td>
                </tr>
                <tr>
                    <td>प्रमाणीकरण</td>
                    <td>@Model.CertificationScore</td>
                </tr>
                <tr>
                    <td>सहयोगी क्रियाकलाप</td>
                    <td>@Model.CollaborativeActivitiesScore</td>
                </tr>
                <tr>
                    <td>दस्तावेज तयारी तथा पुनरावलोकन</td>
                    <td>@Model.ReviewScore</td>
                </tr>
            </table>
        </div>
        <h5>Images</h5>
        <table border="0">
            @if (!String.IsNullOrEmpty(Model.TeamFormationPhoto) || !String.IsNullOrEmpty(Model.SystemAnalysisPhoto) || !String.IsNullOrEmpty(Model.PollutionRiskControlPhoto) || !String.IsNullOrEmpty(Model.ImprovementPlanPhoto) || !String.IsNullOrEmpty(Model.MonitoringPhoto) || !String.IsNullOrEmpty(Model.CertificationPhoto) || !String.IsNullOrEmpty(Model.CollaborativeActivitiesPhoto) || !String.IsNullOrEmpty(Model.ReviewPhoto))
            {
                <tr>
                    @if (!String.IsNullOrEmpty(Model.TeamFormationPhoto))
                    {
                        <td>
                            <img src="/nwash_images/wqs/@Model.TeamFormationPhoto" width="150" class="clickable-image" data-toggle="modal" data-target="#imgModal" />
                        </td>
                    }
                    @if (!String.IsNullOrEmpty(Model.SystemAnalysisPhoto))
                    {
                        <td>
                            <img src="/nwash_images/wqs/@Model.SystemAnalysisPhoto" width="150" class="clickable-image" data-toggle="modal" data-target="#imgModal" />
                        </td>
                    }
                    @if (!String.IsNullOrEmpty(Model.PollutionRiskControlPhoto))
                    {
                        <td>
                            <img src="/nwash_images/wqs/@Model.PollutionRiskControlPhoto" width="150" class="clickable-image" data-toggle="modal" data-target="#imgModal" />
                        </td>
                    }
                </tr>
                <tr>
                    @if (!String.IsNullOrEmpty(Model.ImprovementPlanPhoto))
                    {
                        <td>
                            <img src="/nwash_images/wqs/@Model.ImprovementPlanPhoto" width="150" class="clickable-image" data-toggle="modal" data-target="#imgModal" />
                        </td>
                    }
                    @if (!String.IsNullOrEmpty(Model.MonitoringPhoto))
                    {
                        <td>
                            <img src="/nwash_images/wqs/@Model.MonitoringPhoto" width="150" class="clickable-image" data-toggle="modal" data-target="#imgModal" />
                        </td>
                    }
                    @if (!String.IsNullOrEmpty(Model.CertificationPhoto))
                    {
                        <td>
                            <img src="/nwash_images/wqs/@Model.CertificationPhoto" width="150" class="clickable-image" data-toggle="modal" data-target="#imgModal" />
                        </td>
                    }
                </tr>
                <tr>
                    @if (!String.IsNullOrEmpty(Model.CollaborativeActivitiesPhoto))
                    {
                        <td>
                            <img src="/nwash_images/wqs/@Model.CollaborativeActivitiesPhoto" width="150" class="clickable-image" data-toggle="modal" data-target="#imgModal" />
                        </td>
                    }
                    @if (!String.IsNullOrEmpty(Model.ReviewPhoto))
                    {
                        <td>
                            <img src="/nwash_images/wqs/@Model.ReviewPhoto" width="150" class="clickable-image" data-toggle="modal" data-target="#imgModal" />
                        </td>
                    }
                </tr>
            }
        </table>
        <div id="imgModal" class="modal fade">
            <div class="modal-dialog modal-lg" style="width: auto !important; display: block !important;">
                <div class="modal-content">
                    <div class="modal-body">
                        <button type="button" class="close" data-dismiss="modal" title="Close">&times;</button>
                        <br />
                        <center><img class="showimage img-fluid" src="" /></center>
                        <br />
                        <a class="dlod btn btn-outline-primary btn-sm" href="" download style="float:right;" title="Download"><i class="fa fa-download"></i></a>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <script>
        $(document).ready(function () {
            // Bind the modal event once
            $('#imgModal').on('show.bs.modal', function (event) {
                var image = $(event.relatedTarget).attr('src'); // Get the clicked image
                $(".showimage").attr("src", image);
                $(".dlod").attr("href", image);
            });

            // Bind click event to images
            $('.clickable-image').on('click', function () {
                console.log("Image clicked!"); // Debugging: Check if this appears in the browser console
            });
        });
    </script>
</body>
</html>